(window["webpackJsonp_myapp"]=window["webpackJsonp_myapp"]||[]).push([["chunk-bbe6ee06"],{"239f":function(t,a,e){},5290:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"data-analysis-wrapper"},[e("div",{staticClass:"data-tree-side"},[e("selectTree",{ref:"selectTree",on:{handleChange:t.handleChange}})],1),e("div",{staticClass:"data-table-side"},[e("div",{staticClass:"default-tabs-wrapper"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"交易地点分析",name:"1"}}),e("el-tab-pane",{attrs:{label:"交易类型分析",name:"2"}})],1)],1),e("div",{staticClass:"table-wrapper"},[e(t.componentsMap[t.activeComponent],{tag:"component",attrs:{tabType:t.componentsMap[t.activeComponent].name,selectTreeData:t.selectTreeData}})],1)])])},n=[],r=e("6a21"),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("VCommonSearchTablePage",{ref:t.commonTableRefName,attrs:{optionMap:t.optionMap,showChartsMap:t.showChartsMap,name:"contact-count-table-loading"},on:{request:t.getData}},[e("template",{slot:"common-page-search"},[e("el-row",[e("el-col",{attrs:{span:9}},[e("div",{staticClass:"search-criteria"},[e("div",{staticClass:"search-label"},[t._v("交易时间：")]),e("div",{staticClass:"search-value"},[e("VDatePicker",{model:{value:t.optionMap,callback:function(a){t.optionMap=a},expression:"optionMap"}})],1)])]),e("el-col",{attrs:{span:15}},[e("div",{staticClass:"search-criteria"},[e("div",{staticClass:"search-button-wrapper"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.search}},[t._v("分析")]),e("el-button",{attrs:{size:"small"},on:{click:t.refreshSearch}},[t._v("重置")])],1)])])],1),e("el-row",[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"search-criteria"},[e("div",{staticClass:"search-label"},[t._v("交易网点号：")]),e("div",{staticClass:"search-value"},[e("el-input",{attrs:{size:"small",placeholder:"请填写"},model:{value:t.optionMap.jywddm,callback:function(a){t.$set(t.optionMap,"jywddm",a)},expression:"optionMap.jywddm"}})],1)])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"search-criteria"},[e("div",{staticClass:"search-label"},[t._v("交易网点名称：")]),e("div",{staticClass:"search-value"},[e("el-input",{attrs:{size:"small",placeholder:"请填写"},model:{value:t.optionMap.jywdmc,callback:function(a){t.$set(t.optionMap,"jywdmc",a)},expression:"optionMap.jywdmc"}})],1)])])],1)],1),e("template",{slot:"common-page-content-header"},[e("div",{staticClass:"page-title"},[t._v(" 交易地点分析 ")]),e("div",{staticClass:"task-button-wrapper"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.downloadResult}},[t._v("导出")]),e("el-button",{attrs:{size:"small",type:"text",disabled:0===t.chartsMapData.length},on:{click:t.showChartsMapToggle}},[t._v(t._s(t.switchBtnName))])],1)]),e("template",{slot:"common-table"},[t.showChartsMap?e("PublicCharts",{attrs:{echartsGlag:t.echartsGlag,chartsMapData:t.chartsMapData,seriesOption:[{name:"总收入金额(万元)",type:"bar",stack:"1",barMaxWidth:"100",dataKey:"revenueAmount"},{name:"总收入笔数",type:"line",stack:"2",dataKey:"count"}],dataOption:{startTime:"启始时间：",endTime:"结束时间：",count:"交易笔数：",transactionAmount:"总交易金额 (万元) ："}}}):e("el-table",{attrs:{height:"100%",data:t.tableData}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t.$pageIndex(t.optionMap.currentPageNo,t.optionMap.pageSize,a.$index)))]}}],null,!1,282622886)}),e("el-table-column",{attrs:{prop:"jywddm",label:"交易网点号"}}),e("el-table-column",{attrs:{prop:"jywdmc",label:"交易网点名称"}}),e("el-table-column",{attrs:{prop:"startTime",label:"起始时间"}}),e("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),e("el-table-column",{attrs:{prop:"count",label:"总交易笔数"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showDetail(a.row)}}},[t._v(t._s(a.row.count))])]}}],null,!1,4101944237)}),e("el-table-column",{attrs:{prop:"transactionAmount",label:"总交易金额(万元)"}}),e("el-table-column",{attrs:{prop:"revenueAmount",label:"总收入金额(万元)"}}),e("el-table-column",{attrs:{prop:"expenditureAmount",label:"总支出金额(万元)"}})],1)],1)],2)},l=[],i=e("1da1"),c=(e("d81d"),e("ac1f"),e("841c"),e("96cf"),e("4de4"),e("d3b7"),e("ac16"),e("f8c9"),e("c73c")),p=function(t){return Object(c["a"])({method:"post",url:"/transaction-trajectory/placeTransaction",data:t,loading:!0})},u=function(t){return Object(c["a"])({method:"post",url:"/transaction-trajectory/placeTransactionChart",data:t,loading:!0})},h=function(t){return Object(c["a"])({method:"post",url:"/transaction-trajectory/transactionType",data:t,loading:!0})},m=function(t){return Object(c["a"])({method:"post",url:"/transaction-trajectory/transactionTypeChart",data:t,loading:!0})},d=function(t){return Object(c["a"])({method:"post",url:"/transaction-trajectory/transactionExport",data:t,responseType:"blob"})},b={data:function(){return{commonTableRefName:this.$vnode.tag,currentCaseId:this.$storage.get("data-analysis-current-case"),showChartsMap:!1}},props:{selectTreeData:{type:Array,default:function(){return[]}},tabType:{type:String}},computed:{selectAccountList:function(){return this.selectTreeData.filter((function(t){return 3===t.sign}))},selectCardList:function(){return this.selectTreeData.filter((function(t){return 4===t.sign}))},selectBillList:function(){return this.selectTreeData.filter((function(t){return 5===t.sign}))},selectCaseList:function(){return this.selectTreeData.filter((function(t){return 2===t.sign}))},switchBtnName:function(){return this.showChartsMap?"列表展示":"图形展示"}},methods:{downloadResult:function(){this.transactionExportOperation()},transactionExportOperation:function(){var t=this,a=this.$deepClone(this.params);0!==this.tableData.length&&(Reflect.deleteProperty(a,"pageNo"),Reflect.deleteProperty(a,"pageSize"),Reflect.deleteProperty(a,"tabType"),a.tabType=this.tabType,d(a).then((function(a){t.$fileStreamDownload(a)})))}}},f=e("1b5a"),v={name:"transactionPlaceAnalysisListTable",mixins:[b],components:{PublicCharts:f["a"]},computed:{relationList:function(){return this.$store.state.bill.APP_CONST_DATA.relation||[]},TRANSACTION_SELECT:function(){return this.$store.state.bill.TRANSACTION_SELECT}},data:function(){return{optionMap:{jywddm:"",jywdmc:"",total:0,min:void 0,max:void 0,currentPageNo:1,pageSize:10,searchBeginTime:"",searchEndTime:""},tableData:[],params:{},chartsMapData:[],handleChartsMapData:!0,echartsGlag:!1}},methods:{getData:function(t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.list&&0!==t.list.length){e.next=2;break}return e.abrupt("return");case 2:return a.params=t,e.next=5,p(t);case 5:return s=e.sent,s.success?(a.tableData=s.data.records,a.optionMap.total=s.data.total,a.optionMap.currentPageNo=s.data.current,a.optionMap.pageSize=s.data.size):(a.$message.error(s.msg),a.tableData=[]),e.next=9,u(t);case 9:n=e.sent,n.success?a.chartsMapData=n.data:(a.$message.error(n.msg),a.tableData=[]);case 11:case"end":return e.stop()}}),e)})))()},showDetail:function(t){var a={};for(var e in this.params)a[e]=this.params[e];a.jywddm=t.jywddm,a.jywdmc=t.jywdmc,a.searchBeginTime=t.startTime,a.searchEndTime=t.endTime,this.$dataDetailDialog.show(a)},showChartsMapToggle:function(){this.showChartsMap=!this.showChartsMap},search:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];0!==this.selectBillList.length?(this.optionMap.caseId=this.currentCaseId,this.optionMap.list=this.selectBillList.map((function(t){return{bfkh:t.pid||"",fileId:[t.id]}})),this.$refs[this.commonTableRefName].search(t)):this.$message.error("请选择账单进行分析")},refreshSearch:function(){this.$refs[this.commonTableRefName].refreshSearch()}}},g=v,w=(e("699f"),e("0c7c")),C=Object(w["a"])(g,o,l,!1,null,"281676b1",null),y=C.exports,T=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("VCommonSearchTablePage",{ref:t.commonTableRefName,attrs:{optionMap:t.optionMap,showChartsMap:t.showChartsMap,name:"contact-count-table-loading"},on:{request:t.getData}},[e("template",{slot:"common-page-search"},[e("el-row",[e("el-col",{attrs:{span:9}},[e("div",{staticClass:"search-criteria"},[e("div",{staticClass:"search-label"},[t._v("交易时间：")]),e("div",{staticClass:"search-value"},[e("VDatePicker",{model:{value:t.optionMap,callback:function(a){t.optionMap=a},expression:"optionMap"}})],1)])]),e("el-col",{attrs:{span:15}},[e("div",{staticClass:"search-criteria"},[e("div",{staticClass:"search-button-wrapper"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.search}},[t._v("分析")]),e("el-button",{attrs:{size:"small"},on:{click:t.refreshSearch}},[t._v("重置")])],1)])])],1),e("el-row",[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"search-criteria"},[e("div",{staticClass:"search-label"},[t._v("交易网点号：")]),e("div",{staticClass:"search-value"},[e("el-input",{attrs:{size:"small",placeholder:"请填写"},model:{value:t.optionMap.jywddm,callback:function(a){t.$set(t.optionMap,"jywddm",a)},expression:"optionMap.jywddm"}})],1)])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"search-criteria"},[e("div",{staticClass:"search-label"},[t._v("交易网点名称：")]),e("div",{staticClass:"search-value"},[e("el-input",{attrs:{size:"small",placeholder:"请填写"},model:{value:t.optionMap.jywdmc,callback:function(a){t.$set(t.optionMap,"jywdmc",a)},expression:"optionMap.jywdmc"}})],1)])])],1)],1),e("template",{slot:"common-page-content-header"},[e("div",{staticClass:"page-title"},[t._v("交易类型分析")]),e("div",{staticClass:"task-button-wrapper"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.downloadResult}},[t._v("导出")]),e("el-button",{attrs:{size:"small",type:"text",disabled:0===t.chartsMapData.length},on:{click:t.showChartsMapToggle}},[t._v(t._s(t.switchBtnName))])],1)]),e("template",{slot:"common-table"},[t.showChartsMap?e("ChartsPie",{attrs:{downloadChartsName:t.downloadChartsName,echartsGlag:t.echartsGlag,chartsMapData:t.chartsMapData,dataOption:{channelType:"交易类型：",count:"交易笔数：",transactionAmount:"总交易金额 (万元) ："}}}):e("el-table",{attrs:{height:"100%",data:t.tableData}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t.$pageIndex(t.optionMap.currentPageNo,t.optionMap.pageSize,a.$index)))]}}],null,!1,282622886)}),e("el-table-column",{attrs:{prop:"jywddm",label:"交易网点号"}}),e("el-table-column",{attrs:{prop:"jywdmc",label:"交易网点名称"}}),e("el-table-column",{attrs:{prop:"startTime",label:"起始时间"}}),e("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),e("el-table-column",{attrs:{prop:"channelType",label:"交易类型"}}),e("el-table-column",{attrs:{prop:"count",label:"总交易笔数"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showDetail(a.row)}}},[t._v(t._s(a.row.count))])]}}],null,!1,4101944237)}),e("el-table-column",{attrs:{prop:"transactionAmount",label:"总交易金额(万元)"}}),e("el-table-column",{attrs:{prop:"revenueAmount",label:"总收入金额(万元)"}}),e("el-table-column",{attrs:{prop:"expenditureAmount",label:"总支出金额(万元)"}}),e("el-table-column",{attrs:{prop:"proportionTransactions",label:"交易占比"}})],1)],1)],2)},M=[],D=e("5113"),_={name:"transactionTypeAnalysisListTable",mixins:[b],components:{ChartsPie:D["a"]},computed:{relationList:function(){return this.$store.state.bill.APP_CONST_DATA.relation||[]},TRANSACTION_SELECT:function(){return this.$store.state.bill.TRANSACTION_SELECT}},data:function(){return{optionMap:{jywddm:"",jywdmc:"",total:0,min:void 0,max:void 0,currentPageNo:1,pageSize:10,searchBeginTime:"",searchEndTime:""},tableData:[],params:{},chartsMapData:[],echartsGlag:!0,downloadChartsName:"交易类型分析"}},methods:{getData:function(t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.list&&0!==t.list.length){e.next=2;break}return e.abrupt("return");case 2:return a.params=t,e.next=5,h(t);case 5:return s=e.sent,s.success?(a.tableData=s.data.records,a.optionMap.total=s.data.total,a.optionMap.currentPageNo=s.data.current,a.optionMap.pageSize=s.data.size):(a.$message.error(s.msg),a.tableData=[]),e.next=9,m(t);case 9:n=e.sent,n.success?a.chartsMapData=n.data:(a.$message.error(n.msg),a.tableData=[]);case 11:case"end":return e.stop()}}),e)})))()},showDetail:function(t){var a={};for(var e in this.params)a[e]=this.params[e];a.jywddm=t.jywddm,a.jywdmc=t.jywdmc,a.channelType=t.channelType,a.searchBeginTime=t.startTime,a.searchEndTime=t.endTime,this.$dataDetailDialog.show(a)},showChartsMapToggle:function(){this.showChartsMap=!this.showChartsMap},search:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];0!==this.selectBillList.length?(this.optionMap.caseId=this.currentCaseId,this.optionMap.list=this.selectBillList.map((function(t){return{bfkh:t.pid||"",fileId:[t.id]}})),this.$refs[this.commonTableRefName].search(t)):this.$message.error("请选择账单进行分析")},refreshSearch:function(){this.$refs[this.commonTableRefName].refreshSearch()}}},j=_,k=(e("b982"),Object(w["a"])(j,T,M,!1,null,"610587c0",null)),x=k.exports,N={name:"trajectoryAnalysis",components:{selectTree:r["a"]},data:function(){return{activeName:"1",selectTreeData:[],componentsMap:{1:y,2:x},activeComponent:"1"}},methods:{handleClick:function(t){this.activeComponent=this.activeName},handleChange:function(t){this.selectTreeData=t,this.activeComponent=this.activeName}}},S=N,$=(e("8666"),Object(w["a"])(S,s,n,!1,null,"5c62c8c6",null));a["default"]=$.exports},"699f":function(t,a,e){"use strict";e("88af")},8666:function(t,a,e){"use strict";e("c887")},"88af":function(t,a,e){},b982:function(t,a,e){"use strict";e("239f")},c887:function(t,a,e){}}]);