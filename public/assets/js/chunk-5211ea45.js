(window["webpackJsonp_myapp"]=window["webpackJsonp_myapp"]||[]).push([["chunk-5211ea45"],{"103a":function(t,e,a){"use strict";a.d(e,"i",(function(){return s})),a.d(e,"g",(function(){return r})),a.d(e,"h",(function(){return o})),a.d(e,"f",(function(){return l})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return c})),a.d(e,"c",(function(){return p})),a.d(e,"a",(function(){return u})),a.d(e,"b",(function(){return d}));var n=a("c73c"),s=function(t){return Object(n["a"])({method:"post",url:"/transaction-period/transaction-period-page",data:t,loading:!0})},r=function(t){return Object(n["a"])({method:"post",url:"/transaction-period/transaction-period-chart",data:t,loading:!0})},o=function(t){return Object(n["a"])({method:"post",url:"/transaction-period/transaction-period-export",data:t,responseType:"blob",loading:!0})},l=function(t){return Object(n["a"])({method:"post",url:"/transaction-mutual/page",data:t,loading:!0})},i=function(t){return Object(n["a"])({method:"post",url:"/transaction-mutual/chart",data:t,loading:!0})},c=function(t){return Object(n["a"])({method:"post",url:"/transaction-mutual/export",data:t,responseType:"blob",loading:!0})},p=function(t){return Object(n["a"])({method:"post",url:"/transaction-common/page",data:t,loading:!0})},u=function(t){return Object(n["a"])({method:"post",url:"/transaction-common/chart",data:t,loading:!0})},d=function(t){return Object(n["a"])({method:"post",url:"/transaction-common/export",data:t,responseType:"blob",loading:!0})}},"155c":function(t,e,a){"use strict";a("9b7f")},"1ee7":function(t,e,a){"use strict";a("c4a49")},"4a6c":function(t,e,a){},"6a21":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"select-tree-wrapper",attrs:{name:"select-tree-loading"}},[a("div",{staticClass:"select-tree-title"},[t._v("选择号码")]),a("el-input",{attrs:{size:"small",placeholder:"卡号、账号、姓名"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:t.getTree},slot:"suffix"})]),a("div",{staticClass:"tree-body-wrapper"},[a("el-tree",{ref:"selectTree",staticClass:"filter-tree",attrs:{data:t.dataTree,props:t.defaultProps,"show-checkbox":"","expand-on-click-node":!1,"node-key":"uid","default-expand-all":""},on:{check:t.handleCheckChange},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var n=e.data;return a("span",{staticClass:"custom-tree-node",class:{"hide-check":1===n.sign},attrs:{title:n.label}},[a("span",[t._v(t._s(n.label))])])}}])})],1)],1)},s=[],r=a("2909"),o=(a("99af"),a("c73c")),l=function(t){return Object(o["a"])({method:"get",url:"/bill-data/billTree",params:t})},i=function(t){return Object(o["a"])({method:"post",url:"/gangs-asset-statistic/gangTree",data:t})},c={name:"selectTree",props:{isGroup:{type:Boolean,default:!1}},data:function(){return{searchValue:"",dataTree:[],defaultProps:{children:"children",label:"label"},loading:!1}},mounted:function(){this.getTree()},methods:{getTree:function(){var t=this,e=this.$storage.get("data-analysis-current-case");this.loading=!0;var a=this.searchValue,n=this.isGroup?i:l;n({caseId:e,searchValue:a}).then((function(e){e.success?t.dataTree=e.data:t.$message.error(e.msg),t.loading=!1})).catch((function(e){console.log(e),t.loading=!1}))},handleCheckChange:function(t,e){console.log(t,e);var a=e.checkedNodes,n=e.halfCheckedNodes;this.$emit("handleChange",[].concat(Object(r["a"])(a),Object(r["a"])(n)))},clearTreeChecked:function(){var t=this;this.$nextTick((function(){t.$refs.selectTree.setCheckedKeys([]),t.$emit("handleChange",[])}))}}},p=c,u=(a("7f83"),a("0c7c")),d=Object(u["a"])(p,n,s,!1,null,"96627a8e",null);e["a"]=d.exports},"7f83":function(t,e,a){"use strict";a("840e")},"840e":function(t,e,a){},"904d":function(t,e,a){"use strict";a("4a6c")},"9b7f":function(t,e,a){},a61e:function(t,e,a){},a9dd:function(t,e,a){t.exports=a.p+"assets/img/data_01.png"},c4a49:function(t,e,a){},c4f1:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"charts-map-wrapper"},[a("div",{staticClass:"charts-map-content",staticStyle:{height:"100%"},attrs:{id:"baseRelationCharts"}})])}],r=(a("d81d"),a("b0c0"),a("d3b7"),a("159b"),a("a9dd")),o=a.n(r),l=(a("fbb7"),{name:"mulRelationCharts",data:function(){return{myCharts:null,showSize:10,optionData:[],baseUrl:"/",loading:!1}},props:{chartsMapData:{type:Object,default:function(){}},toolTipFormatOptions:{type:Object,default:function(){return{bfzh:"本方账号",bfhm:"本方户名",jydfzh:"对方账号",dfmc:"对方户名",totalTransNum:"总交易笔数",totalAmount:"总交易金额(万元)",incomeAmount:"总收入金额(万元)",expendAmount:"总支出金额(万元)",netIncome:"净收入(万元)"}}}},watch:{chartsMapData:{deep:!0,handler:function(){this.renderEcharts()}}},mounted:function(){this.renderEcharts()},methods:{renderEcharts:function(){var t=this,e=this.$echarts.init(document.getElementById("baseRelationCharts")),a=this.chartsMapData.nodes&&this.$deepClone(this.chartsMapData).nodes.map((function(t){return{name:t.account,username:t.name,category:t.bf}})),n=this.chartsMapData.links&&this.$deepClone(this.chartsMapData).links.map((function(t){return t.source=t.bfzh,t.target=t.jydfzh,t})),s="image://"+o.a;a.forEach((function(t){t.symbol=s,t.symbolSize=25})),n.forEach((function(e){console.log(e),t.$set(e,"lineStyle",{}),1===e.color&&(e.lineStyle.color="#0099ff"),1===e.arrowType?(e.symbol=["","arrow"],e.edgeSymbolSize=[10,10]):2===e.arrowType&&(e.symbol=["arrow","arrow"],e.edgeSymbolSize=[10,10])}));var r={legend:{x:"center",show:!1,data:[{name:1},{name:2}]},tooltip:{trigger:"item",formatter:function(e){if("node"===e.dataType){var a=e.data.username?"<div>姓名 : "+e.data.username+"</div>":"",n=e.data.name?"<div>账号 : "+e.data.name+"</div>":"";return a+n}if("edge"===e.dataType){var s="";for(var r in t.toolTipFormatOptions)s+=t.toolTipFormatOptions[r]+" : "+(e.data[r]?"<span>"+e.data[r]+"</span><br>":"<br>");return s}}},toolbox:{feature:{saveAsImage:{type:"png"}}},series:{type:"graph",layout:"force",draggable:!0,roam:!0,zoom:5,focusNodeAdjacency:!0,edgeSymbol:["",""],edgeSymbolSize:[10,10],force:{repulsion:100},lineStyle:{width:3,curveness:.1},data:a,links:n,categories:[{name:0},{name:1},{name:2}],emphasis:{focus:"adjacency",lineStyle:{},label:{show:!0,color:"#000",position:"bottom"}}}};e.setOption(r),e.resize(),window.onresize=function(){e.resize()},this.myChart=e}}}),i=l,c=a("0c7c"),p=Object(c["a"])(i,n,s,!1,null,"b5357700",null);e["a"]=p.exports},c9ea:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-analysis-wrapper"},[a("div",{staticClass:"data-tree-side"},[a("selectTree",{ref:"selectTree",on:{handleChange:t.handleChange}})],1),a("div",{staticClass:"data-table-side"},[a("div",{staticClass:"default-tabs-wrapper"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"交易时段分析",name:"1"}}),a("el-tab-pane",{attrs:{label:"互相交易人分析",name:"2"}}),a("el-tab-pane",{attrs:{label:"共同交易人分析",name:"3"}})],1)],1),a("div",{staticClass:"table-wrapper"},[a(t.componentsMap[t.activeComponent],{tag:"component",attrs:{tabType:t.activeName,selectTreeData:t.selectTreeData}})],1)])])},s=[],r=a("6a21"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VCommonSearchTablePage",{ref:t.commonTableRefName,attrs:{fixTable:"",optionMap:t.optionMap,showChartsMap:t.showChartsMap,name:"contact-count-table-loading"},on:{request:t.getData}},[a("template",{slot:"common-page-search"},[a("el-row",[a("el-col",{attrs:{span:25}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-label"},[t._v("联系时段：")]),a("div",{staticClass:"search-value"},[a("VDatePicker",{model:{value:t.optionMap,callback:function(e){t.optionMap=e},expression:"optionMap"}})],1)])]),a("el-col",{attrs:{span:25}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-value"},[a("el-radio",{attrs:{label:0},model:{value:t.optionMap.dateType,callback:function(e){t.$set(t.optionMap,"dateType",e)},expression:"optionMap.dateType"}},[t._v("全部")]),a("el-radio",{attrs:{label:1},model:{value:t.optionMap.dateType,callback:function(e){t.$set(t.optionMap,"dateType",e)},expression:"optionMap.dateType"}},[t._v("工作日")]),a("el-radio",{attrs:{label:2},model:{value:t.optionMap.dateType,callback:function(e){t.$set(t.optionMap,"dateType",e)},expression:"optionMap.dateType"}},[t._v("非工作日")])],1)])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-button-wrapper"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.search}},[t._v("分析")]),a("el-button",{attrs:{size:"small"},on:{click:t.refreshSearch}},[t._v("取消")])],1)])])],1)],1),a("template",{slot:"common-page-content-header"},[a("div",{staticClass:"page-title"},[t._v("共同交易人分析")]),a("div",{staticClass:"task-button-wrapper"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.exportReport}},[t._v("导出")]),a("el-button",{attrs:{size:"small",type:"text",disabled:!t.chartsMapData},on:{click:t.showChartsMapToggle}},[t._v(t._s(t.switchBtnName))])],1)]),a("template",{slot:"common-table"},[t.showChartsMap?a("baseRelationCharts",{attrs:{chartsMapData:t.chartsMapData,toolTipFormatOptions:{bfzh:"本方账号",bfhm:"本方户名",jydfzh:"对方账号",dfmc:"对方户名",totalTransNum:"总交易笔数",totalAmount:"总交易金额(万元)"}}}):a("el-table",{ref:"doLayoutTable",attrs:{height:"100%",data:t.tableData}},[a("el-table-column",{attrs:{type:"index",fixed:"",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$pageIndex(t.optionMap.currentPageNo,t.optionMap.pageSize,e.$index))+" ")]}}],null,!1,1762826854)}),a("el-table-column",{attrs:{fixed:"","min-width":"150",width:t.colWidth(),align:"center",prop:"account",label:"共同交易人"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.account&&e.row.account.hm))]),a("div",[t._v(t._s(e.row.account&&e.row.account.zh))])]}}],null,!1,2615015235)}),t._l(t.tableHeader,(function(e){return a("el-table-column",{key:"tableHeader_"+e.zh,attrs:{"min-width":"200",align:"center",width:t.colWidth()},scopedSlots:t._u([{key:"default",fn:function(n){return[a("div",{staticClass:"init-table-header-gap-top"},[t._v("总交易次数： "),a("span",{staticStyle:{color:"#3077ff",cursor:"pointer"},on:{click:function(a){return t.handleDetail(n.row,e.zh)}}},[t._v(" "+t._s(n.row.transDetails&&n.row.transDetails[e.zh]&&n.row.transDetails[e.zh].totalTransNum))])]),a("div",{staticClass:"init-table-header-gap-bottom"},[t._v(" 总交易金额(万元)："+t._s(n.row.transDetails&&n.row.transDetails[e.zh]&&n.row.transDetails[e.zh].totalAmount)+" ")])]}}],null,!0)},[a("template",{slot:"header"},[a("div",{staticClass:"init-table-header-gap-top",staticStyle:{"text-align":"center"}},[t._v(" "+t._s(e.hm)+" ")]),a("div",{staticClass:"init-table-header-gap-bottom",staticStyle:{"text-align":"center"}},[t._v(t._s(e.zh))])])],2)}))],2)],1)],2)},l=[],i=a("1da1"),c=(a("96cf"),a("99af"),a("b64b"),a("d81d"),a("ac1f"),a("5319"),a("841c"),a("4de4"),a("d3b7"),{data:function(){return{commonTableRefName:this.$vnode.tag,currentCaseId:this.$storage.get("data-analysis-current-case"),showChartsMap:!1}},props:{selectTreeData:{type:Array,default:function(){return[]}}},computed:{selectAccountList:function(){return this.selectTreeData.filter((function(t){return 3===t.sign}))},selectCardList:function(){return this.selectTreeData.filter((function(t){return 4===t.sign}))},selectBillList:function(){return this.selectTreeData.filter((function(t){return 5===t.sign}))},switchBtnName:function(){return this.showChartsMap?"列表展示":"图形展示"}}}),p=a("103a"),u=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"charts-map-wrapper"},[a("div",{staticClass:"charts-map-content",attrs:{id:"baseRelationCharts"}})])}],h=(a("b0c0"),a("159b"),a("a9dd")),m=a.n(h),f=a("fbb7"),b=a.n(f),v={name:"baseRelationCharts",data:function(){return{myCharts:null,showSize:10,optionData:[],baseUrl:"/"}},props:{chartsMapData:{type:Object,default:function(){}},toolTipFormatOptions:{type:Object,default:function(){return{bfzh:"本方账号",bfhm:"本方户名",jydfzh:"对方账号",dfmc:"对方户名",totalTransNum:"总交易笔数",totalAmount:"总交易金额(万元)",incomeAmount:"总收入金额(万元)",expendAmount:"总支出金额(万元)",netIncome:"净收入(万元)"}}},selectPhoneList:{type:Array,default:function(){return[]}}},watch:{chartsMapData:{deep:!0,handler:function(){this.renderEcharts()}}},mounted:function(){this.renderEcharts()},methods:{renderEcharts:function(){var t=this,e=this.$echarts.init(document.getElementById("baseRelationCharts")),a=this.chartsMapData.nodes&&this.chartsMapData.nodes.map((function(t){return{name:t.account,username:t.name,category:t.bf}})),n=this.chartsMapData.links&&this.chartsMapData.links.map((function(t){return t.source=t.bfzh,t.target=t.jydfzh,t})),s="image://"+m.a,r="image://"+b.a;a.forEach((function(t){0===t.category?(t.symbol=s,t.symbolSize=25):1===t.category&&(t.symbol=r,t.symbolSize=20)}));var o={legend:{x:"center",show:!1,data:[{name:1},{name:2}]},tooltip:{trigger:"item",formatter:function(e){if("node"===e.dataType){var a=e.data.username?"<div>姓名 : "+e.data.username+"</div>":"",n=e.data.name?"<div>账号 : "+e.data.name+"</div>":"";return a+n}if("edge"===e.dataType){var s="";for(var r in t.toolTipFormatOptions)s+=t.toolTipFormatOptions[r]+" : "+(e.data[r]?"<span>"+e.data[r]+"</span><br>":"<br>");return s}}},toolbox:{feature:{saveAsImage:{type:"png",name:"互相通话分析"}}},series:[{type:"graph",layout:"force",draggable:!0,roam:!0,zoom:3,focusNodeAdjacency:!0,edgeSymbol:["circle","circle"],edgeSymbolSize:[0,0],lineStyle:{curveness:0},data:a,links:n,categories:[{name:0},{name:1},{name:2}],emphasis:{focus:"adjacency",lineStyle:{width:2,color:"#0099ff"},label:{show:!0,color:"#000",position:"bottom"}}}]};e.setOption(o),window.onresize=function(){e.resize()}}}},g=v,y=a("0c7c"),T=Object(y["a"])(g,u,d,!1,null,"2ab6e40e",null),_=T.exports,C={name:"jointTradersAnalysis",mixins:[c],components:{baseRelationCharts:_},computed:{relationList:function(){return this.$store.state.bill.APP_CONST_DATA.relation||[]},TRANSACTION_SELECT:function(){return this.$store.state.bill.TRANSACTION_SELECT}},data:function(){return{optionMap:{total:0,dateType:0,currentPageNo:1,pageSize:10,searchBeginTime:"",searchEndTime:""},tableData:[],params:{},chartsMapData:null,tableHeader:[]}},methods:{colWidth:function(){return"calc(".concat(100/(this.tableHeader.length+1),"% - ").concat(80/(this.tableHeader.length+1),"px)")},exportReport:function(){var t=this;0!==this.tableData.length&&Object(p["b"])(this.params).then((function(e){t.$fileStreamDownload(e)}))},getData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.tableData=[],e.$nextTick((function(){e.$refs.doLayoutTable.doLayout()})),t.list&&0!==t.list.length){a.next=4;break}return a.abrupt("return");case 4:return e.params=t,a.next=7,Object(p["c"])(t);case 7:return n=a.sent,n.success?(e.tableData=n.data.dataLists,e.tableHeader=n.data.header,e.optionMap.total=n.data.total,e.optionMap.currentPageNo=n.data.current,e.optionMap.pageSize=n.data.size):(e.$message.error(n.msg),e.tableData=[]),a.next=11,Object(p["a"])(t);case 11:s=a.sent,s.success?e.chartsMapData=Object.keys(s.data).length?s.data:null:(e.$message.error(s.msg),e.chartsMapData=null);case 13:case"end":return a.stop()}}),a)})))()},handleDetail:function(t,e){var a={};for(var n in this.params)a[n]=this.params[n];a.bfzh=e,a.jydfzh=t.account.zh,this.$dataDetailDialog.show(a)},showDetail:function(t){var e={};for(var a in this.params)e[a]=this.params[a];e.bfzh=t.bfzh,e.jydfzh=t.jydfzh},showChartsMapToggle:function(){this.showChartsMap=!this.showChartsMap},search:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];0!==this.selectBillList.length?this.selectAccountList.length<1?this.$message.error("至少选择两个账号进行分析"):(this.optionMap.caseId=this.currentCaseId,this.optionMap.jyzh=this.selectAccountList.map((function(t){return t.label.replace(/[^\d]/g,"")})),this.optionMap.list=this.selectBillList.map((function(t){return{bfkh:t.pid||"",fileId:[t.id]}})),this.$refs[this.commonTableRefName].search(t)):this.$message.error("请选择账单进行分析")},refreshSearch:function(){this.$refs[this.commonTableRefName].refreshSearch()}}},M=C,w=(a("d8af"),Object(y["a"])(M,o,l,!1,null,"eabb61e4",null)),D=w.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VCommonSearchTablePage",{ref:t.commonTableRefName,attrs:{optionMap:t.optionMap,showChartsMap:t.showChartsMap,name:"contact-count-table-loading"},on:{request:t.getData}},[a("template",{slot:"common-page-search"},[a("el-row",[a("el-col",{attrs:{span:25}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-label"},[t._v("联系时段：")]),a("div",{staticClass:"search-value"},[a("VDatePicker",{model:{value:t.optionMap,callback:function(e){t.optionMap=e},expression:"optionMap"}})],1)])]),a("el-col",{attrs:{span:25}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-value"},[a("el-radio",{attrs:{label:0},model:{value:t.optionMap.dateType,callback:function(e){t.$set(t.optionMap,"dateType",e)},expression:"optionMap.dateType"}},[t._v("全部")]),a("el-radio",{attrs:{label:1},model:{value:t.optionMap.dateType,callback:function(e){t.$set(t.optionMap,"dateType",e)},expression:"optionMap.dateType"}},[t._v("工作日")]),a("el-radio",{attrs:{label:2},model:{value:t.optionMap.dateType,callback:function(e){t.$set(t.optionMap,"dateType",e)},expression:"optionMap.dateType"}},[t._v("非工作日")])],1)])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-button-wrapper"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.search}},[t._v("分析")]),a("el-button",{attrs:{size:"small"},on:{click:t.refreshSearch}},[t._v("取消")])],1)])])],1)],1),a("template",{slot:"common-page-content-header"},[a("div",{staticClass:"page-title"},[t._v("互相交易人分析")]),a("div",{staticClass:"task-button-wrapper"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.exportReport}},[t._v("导出")]),a("el-button",{attrs:{size:"small",type:"text",disabled:!t.chartsMapData},on:{click:t.showChartsMapToggle}},[t._v(t._s(t.switchBtnName))])],1)]),a("template",{slot:"common-table"},[t.showChartsMap?a("mulRelationCharts",{attrs:{chartsMapData:t.chartsMapData}}):a("el-table",{attrs:{height:"100%",data:t.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$pageIndex(t.optionMap.currentPageNo,t.optionMap.pageSize,e.$index))+" ")]}}],null,!1,1842277062)}),a("el-table-column",{attrs:{prop:"bfzh",label:"本方账号"}}),a("el-table-column",{attrs:{prop:"jydfmc",label:"本方户名"}}),a("el-table-column",{attrs:{prop:"jydfzh",label:"对方账号"}}),a("el-table-column",{attrs:{prop:"dfmc",label:"对方名称"}}),a("el-table-column",{attrs:{prop:"startTime",label:"起始时间"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),a("el-table-column",{attrs:{prop:"period",label:"交易时段"}}),a("el-table-column",{attrs:{prop:"totalTransNum",label:"总交易笔数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v(t._s(e.row.totalTransNum))])]}}],null,!1,3891607648)}),a("el-table-column",{attrs:{prop:"totalAmount",label:"总交易金额(万元)"}}),a("el-table-column",{attrs:{prop:"incomeNum",label:"总收入笔数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showDetail(e.row,"贷")}}},[t._v(t._s(e.row.incomeNum))])]}}],null,!1,1481616352)}),a("el-table-column",{attrs:{prop:"incomeAmount",label:"总收入金额(万元)"}}),a("el-table-column",{attrs:{prop:"expendNum",label:"总支出笔数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showDetail(e.row,"借")}}},[t._v(t._s(e.row.expendNum))])]}}],null,!1,2004547337)}),a("el-table-column",{attrs:{prop:"expendAmount",label:"总支出金额(万元)"}}),a("el-table-column",{attrs:{prop:"netIncome",label:"净收入(万元)"}}),a("el-table-column",{attrs:{prop:"relation",label:"办案人员判定关系"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.relations)+" ")]}}],null,!1,4214532200)})],1)],1)],2)},x=[],z=(a("7db0"),a("c4f1")),S={name:"mutualTraderAnalysis",mixins:[c],components:{MulRelationCharts:z["a"]},computed:{relationList:function(){return this.$store.state.bill.APP_CONST_DATA.relation||[]},TRANSACTION_SELECT:function(){return this.$store.state.bill.TRANSACTION_SELECT},BORROW_OR_LEND_SELECT:function(){return this.$store.state.bill.BORROW_OR_LEND_SELECT}},data:function(){return{optionMap:{total:0,dateType:0,currentPageNo:1,pageSize:10,searchBeginTime:"",searchEndTime:""},tableData:[],params:{},chartsMapData:null}},methods:{getData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.list&&0!==t.list.length){a.next=2;break}return a.abrupt("return");case 2:return e.params=t,a.next=5,Object(p["f"])(t);case 5:return n=a.sent,n.success?(e.tableData=n.data.records,e.optionMap.total=n.data.total,e.optionMap.currentPageNo=n.data.current,e.optionMap.pageSize=n.data.size):(e.$message.error(n.msg),e.tableData=[]),a.next=9,Object(p["d"])(t);case 9:if(s=a.sent,!s.success){a.next=17;break}if(e.chartsMapData=Object.keys(s.data).length?s.data:null,e.chartsMapData){a.next=14;break}return a.abrupt("return");case 14:s.data.nodes&&s.data.nodes.forEach((function(t){if(2===t.target){var e=t.bfzh;t.bfzh=t.jydfzh,t.jydfzh=e;var a=t.bfhm;t.bfhm=t.dfmc,t.dfmc=a}})),a.next=19;break;case 17:e.$message.error(s.msg),e.chartsMapData=null;case 19:case"end":return a.stop()}}),a)})))()},exportReport:function(){var t=this;0!==this.tableData.length&&Object(p["e"])(this.params).then((function(e){t.$fileStreamDownload(e)}))},showDetail:function(t,e){var a={};for(var n in this.params)a[n]=this.params[n];a.bfzh=t.bfzh,a.jydfzh=t.jydfzh,a.searchBeginTime=t.startTime,a.searchEndTime=t.endTime,e&&(a.jdbz=this.BORROW_OR_LEND_SELECT.find((function(t){return t.label===e})).value),this.$dataDetailDialog.show(a)},showChartsMapToggle:function(){this.showChartsMap=!this.showChartsMap},search:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];0!==this.selectBillList.length?this.selectAccountList.length<1?this.$message.error("至少选择两个账号进行分析"):(this.optionMap.jyzh=this.selectAccountList.map((function(t){return t.label.replace(/[^\d]/g,"")})),this.optionMap.caseId=this.currentCaseId,this.optionMap.list=this.selectBillList.map((function(t){return{bfkh:t.pid||"",fileId:[t.id]}})),this.$refs[this.commonTableRefName].search(t)):this.$message.error("请选择账单进行分析")},refreshSearch:function(){this.$refs[this.commonTableRefName].refreshSearch()}}},N=S,O=(a("904d"),Object(y["a"])(N,k,x,!1,null,"65477746",null)),j=O.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VCommonSearchTablePage",{ref:t.commonTableRefName,attrs:{optionMap:t.optionMap,showChartsMap:t.showChartsMap,name:"contact-count-table-loading"},on:{request:t.getData}},[a("template",{slot:"common-page-search"},[a("el-row",[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-label"},[t._v("对方账号：")]),a("div",{staticClass:"search-value"},[a("el-input",{attrs:{size:"small",placeholder:"请填写"},model:{value:t.optionMap.jydfzh,callback:function(e){t.$set(t.optionMap,"jydfzh",e)},expression:"optionMap.jydfzh"}})],1)])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-label"},[t._v("总交易笔数：")]),a("div",{staticClass:"search-value"},[a("el-select",{attrs:{size:"small"},model:{value:t.optionMap.count,callback:function(e){t.$set(t.optionMap,"count",e)},expression:"optionMap.count"}},t._l(t.TRANSACTION_SELECT,(function(e,n){return a("el-option",{key:t.commonTableRefName+"_"+e.label+"_"+e.value+"_"+n,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-label"},[t._v("总交易金额(万元)：")]),a("div",{staticClass:"search-value"},[a("VCountNumPick",{model:{value:t.optionMap,callback:function(e){t.optionMap=e},expression:"optionMap"}})],1)])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-button-wrapper"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.search}},[t._v("分析")]),a("el-button",{attrs:{size:"small"},on:{click:t.refreshSearch}},[t._v("取消")])],1)])])],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-label"},[t._v("联系时段：")]),a("div",{staticClass:"search-value"},[a("VDatePicker",{model:{value:t.optionMap,callback:function(e){t.optionMap=e},expression:"optionMap"}})],1)])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"search-criteria"},[a("div",{staticClass:"search-value"},[a("el-radio",{attrs:{label:0},model:{value:t.optionMap.dateType,callback:function(e){t.$set(t.optionMap,"dateType",e)},expression:"optionMap.dateType"}},[t._v("全部")]),a("el-radio",{attrs:{label:1},model:{value:t.optionMap.dateType,callback:function(e){t.$set(t.optionMap,"dateType",e)},expression:"optionMap.dateType"}},[t._v("工作日")]),a("el-radio",{attrs:{label:2},model:{value:t.optionMap.dateType,callback:function(e){t.$set(t.optionMap,"dateType",e)},expression:"optionMap.dateType"}},[t._v("非工作日")])],1)])])],1)],1),a("template",{slot:"common-page-content-header"},[a("div",{staticClass:"page-title"},[t._v("交易时段分析")]),a("div",{staticClass:"task-button-wrapper"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.exportReport}},[t._v("导出")]),a("el-button",{attrs:{size:"small",type:"text",disabled:0===t.chartsMapData.length},on:{click:t.showChartsMapToggle}},[t._v(t._s(t.switchBtnName))])],1)]),a("template",{slot:"common-table"},[t.showChartsMap?a("baseRelationCharts",{attrs:{chartsMapData:t.chartsMapData}}):a("el-table",{attrs:{height:"100%",data:t.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$pageIndex(t.optionMap.currentPageNo,t.optionMap.pageSize,e.$index))+" ")]}}],null,!1,1842277062)}),a("el-table-column",{attrs:{prop:"bfzh",label:"本方账号"}}),a("el-table-column",{attrs:{prop:"jydfmc",label:"本方户名"}}),a("el-table-column",{attrs:{prop:"jydfzh",label:"对方账号"}}),a("el-table-column",{attrs:{prop:"dfmc",label:"对方名称"}}),a("el-table-column",{attrs:{prop:"startTime",label:"起始时间"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),a("el-table-column",{attrs:{prop:"period",label:"交易时段"}}),a("el-table-column",{attrs:{prop:"totalTransNum",label:"总交易笔数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v(t._s(e.row.totalTransNum))])]}}],null,!1,3891607648)}),a("el-table-column",{attrs:{prop:"totalAmount",label:"总交易金额(万元)"}}),a("el-table-column",{attrs:{prop:"incomeNum",label:"总收入笔数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showDetail(e.row,"贷")}}},[t._v(t._s(e.row.incomeNum))])]}}],null,!1,1481616352)}),a("el-table-column",{attrs:{prop:"incomeAmount",label:"总收入金额(万元)"}}),a("el-table-column",{attrs:{prop:"expendNum",label:"总支出笔数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showDetail(e.row,"借")}}},[t._v(t._s(e.row.expendNum))])]}}],null,!1,2004547337)}),a("el-table-column",{attrs:{prop:"expendAmount",label:"总支出金额(万元)"}}),a("el-table-column",{attrs:{prop:"netIncome",label:"净收入(万元)"}}),a("el-table-column",{attrs:{prop:"relation",label:"办案人员判定关系"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.relations)+" ")]}}],null,!1,4214532200)})],1)],1)],2)},R=[],A={name:"tradingPeriodAnalysis",mixins:[c],components:{baseRelationCharts:_},computed:{relationList:function(){return this.$store.state.bill.APP_CONST_DATA.relation||[]},TRANSACTION_SELECT:function(){return this.$store.state.bill.TRANSACTION_SELECT},BORROW_OR_LEND_SELECT:function(){return this.$store.state.bill.BORROW_OR_LEND_SELECT}},data:function(){return{optionMap:{total:0,jydfzh:"",dateType:0,count:"",min:void 0,max:void 0,currentPageNo:1,pageSize:10,searchBeginTime:"",searchEndTime:""},tableData:[],params:{},chartsMapData:[]}},methods:{exportReport:function(){var t=this;0!==this.tableData.length&&Object(p["h"])(this.params).then((function(e){t.$fileStreamDownload(e)}))},getData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.list&&0!==t.list.length){a.next=2;break}return a.abrupt("return");case 2:return e.params=e.$deepClone(t),e.params.jydfzh||(e.params.jydfzh=void 0),a.next=6,Object(p["i"])(e.params);case 6:return n=a.sent,n.success?(e.tableData=n.data.records,e.optionMap.total=n.data.total,e.optionMap.currentPageNo=n.data.current,e.optionMap.pageSize=n.data.size):(e.$message.error(n.msg),e.tableData=[]),a.next=10,Object(p["g"])(e.params);case 10:s=a.sent,s.success?e.chartsMapData=s.data:(e.$message.error(s.msg),e.chartsMapData=[]);case 12:case"end":return a.stop()}}),a)})))()},showDetail:function(t,e){var a={};for(var n in this.params)a[n]=this.params[n];a.bfzh=t.bfzh,a.jydfzh=t.jydfzh,a.searchBeginTime=t.startTime,a.searchEndTime=t.endTime,e&&(a.jdbz=this.BORROW_OR_LEND_SELECT.find((function(t){return t.label===e})).value),this.$dataDetailDialog.show(a)},showChartsMapToggle:function(){this.showChartsMap=!this.showChartsMap},search:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];0!==this.selectBillList.length?(this.optionMap.caseId=this.currentCaseId,this.optionMap.list=this.selectBillList.map((function(t){return{bfkh:t.pid||"",fileId:[t.id]}})),this.$refs[this.commonTableRefName].search(t)):this.$message.error("请选择账单进行分析")},refreshSearch:function(){this.$refs[this.commonTableRefName].refreshSearch()}}},E=A,L=(a("1ee7"),Object(y["a"])(E,$,R,!1,null,"db0d38f4",null)),I=L.exports,P={name:"intimacyAnalysis",components:{selectTree:r["a"],jointTradersAnalysis:D,mutualTraderAnalysis:j,tradingPeriodAnalysis:I},data:function(){return{activeName:"1",selectTreeData:[],componentsMap:{1:"tradingPeriodAnalysis",2:"mutualTraderAnalysis",3:"jointTradersAnalysis"},activeComponent:"1"}},methods:{handleClick:function(){this.activeComponent=this.activeName},handleChange:function(t){this.selectTreeData=t,this.activeComponent=this.activeName}}},B=P,V=(a("155c"),Object(y["a"])(B,n,s,!1,null,"fe0bd9ce",null));e["default"]=V.exports},d8af:function(t,e,a){"use strict";a("a61e")},fbb7:function(t,e,a){t.exports=a.p+"assets/img/data_02.png"}}]);